![image](https://user-images.githubusercontent.com/87981867/212082015-7755192f-49cb-460b-af89-475378aeb9ed.png)

## BentoMLì´ë€?

- ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ì„ ë§Œë“¤ë©´ í•´ë‹¹ ëª¨ë¸ì„ ì‰½ê²Œ ë°°í¬ ë° í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- ê°„ë‹¨í•œ ì½”ë“œë¡œë„ ì‰½ê²Œ API ì„œë²„ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆê³ , Dockerfile ì œê³µê³¼ í•¨ê»˜ Docker Imageë¥¼ ê°„í¸í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•¨

## ì£¼ìš” ê¸°ëŠ¥ ë° íŠ¹ì§•

### (1) ML í”„ë ˆì„ì›Œí¬

- ë‹¤ì–‘í•œ ë¨¸ì‹ ëŸ¬ë‹ í”„ë ˆì„ì›Œí¬ë“¤ì„ ì§€ì›(scikit-learn, tensorflow, pytorch, xgboost ë“±)

### (2) Yatai ì„œë²„

- Yatai ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì—¬ ì €ì¥ëœ ëª¨ë¸, ë°°í¬ëœ ëª¨ë¸ì„ ë³´ì—¬ì¤Œê³¼ ë™ì‹œì— ê´€ë¦¬ë„ ê°€ëŠ¥

### (3) ì»¨í…Œì´ë„ˆí™”

- docker ì»¨í…Œì´ë„ˆ ìƒì„± ë° docker image ìƒì„± ê°€ëŠ¥

### (4) ë‹¤ì–‘í•œ íŒŒì¼ ìƒì„±

- ë„ì»¤ íŒŒì¼, í•™ìŠµ ëª¨ë¸ ì •ë³´, environment ë“± ëª¨ë¸ ë°°í¬ì— í•„ìš”í•œ ì—¬ëŸ¬ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìƒì„±

### (5) API ìƒì„±

- ìƒì„±ëœ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í™œìš©í•´ì„œ ë„ì»¤ ëª…ë ¹ì–´ë¥¼ í†µí•´ API servingì´ ê°€ëŠ¥

## ì‚¬ìš© ì˜ˆì‹œ

### (1) ì„¤ì¹˜ë°©ë²•

```python
pip install bentoml
```

### (2) ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì„±

```
ğŸ’¡
1) main.py
: ì „ì²´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” mainì„ ë‹´ë‹¹í•˜ë©°, ëª¨ë¸ì„ return í•¨ ë˜í•œ ê°€ì ¸ì˜¨ ëª¨ë¸ì„ BentoMLì— packing ê°€ëŠ¥(*packing : ë¨¸ì‹ ëŸ¬ë‹ ë˜ëŠ” ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ ì €ì¥í•˜ëŠ” ê°œë…) 

2) bentoml_process.py
: ìƒì„±í•œ ëª¨ë¸ì„ ì…ë ¥ ë°›ì•„ classifier ê°ì²´ë¥¼ ìƒì„±í•´ì„œ packingì„ ì§„í–‰í•œ í›„ ì´ëŸ¬í•œ í™˜ê²½ê°’ë“¤ì„ ì €ì¥í•˜ì—¬ docker ë“±ì˜ ë‹¤ì–‘í•œ íŒŒì¼ì„ ìƒì„±

3) classifier.py
: ê°ì¢… bentoml ê¸°ëŠ¥ì„ ë‹´ê³  ìˆëŠ” íŒŒì¼ì´ë©°, BentoServiceë¥¼ ìƒì†í•˜ì—¬ ì‚¬ìš©(ì‹¤í–‰ ì‹œ Web UI í™”ë©´ í˜¸ì¶œ)
```

### (3) ì‹¤í–‰ë°©ë²• ë° ê²°ê³¼

```python
bentoml serve {classifier}:{version}
>>> Running on http://127.0.0.1:5000
```

![image](https://user-images.githubusercontent.com/87981867/212082268-949a4781-5cfb-40d1-9d5b-14b07cc29d82.png)

- ì´ í™”ë©´ì„ í†µí•´ì„œ ëª¨ë¸ì—ì„œ ë‚˜ì˜¨ ê²°ê³¼ê°’ì„ í™•ì¸ ê°€ëŠ¥

![image](https://user-images.githubusercontent.com/87981867/212082331-3ae18fbb-60a2-4f87-a5aa-49f4f6135e53.png)

- dockerfile, requirements, setup ë“± ë°°í¬ì— í•„ìš”í•œ ì—¬ëŸ¬ íŒŒì¼ë“¤ì´ ìë™ìœ¼ë¡œ ìƒì„± ë¨

![image](https://user-images.githubusercontent.com/87981867/212082391-02b53450-9b18-4ff9-9851-12723383d86e.png)

- ë„ì»¤ ë¹Œë“œë¥¼ í†µí•´ ë„ì»¤ ì´ë¯¸ì§€ ìƒì„± ê°€ëŠ¥

```python
docker run -p 5000:5000 {dockerimage}
```

- ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ì—¬ BentoML API Servingì´ ê°€ëŠ¥
- docker run ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•˜ê³  portë§Œ ì—´ì–´ì£¼ë©´ ê°„ë‹¨íˆ ì‹¤í–‰ ê°€ëŠ¥

```python
bentoml yatai-service-start {classifier}:{version}
>>> Running on http://127.0.0.1:5000
```

![image](https://user-images.githubusercontent.com/87981867/212082481-33922931-973f-4808-8ed4-0548df490b6b.png)

- Yataië¥¼ ì‹¤í–‰í•˜ë©´ ê·¸ë¦¼ê³¼ ê°™ì´ Web UIë¥¼ í™œìš©í•˜ì—¬ ë¨¸ì‹ ëŸ¬ë‹ ë° ë”¥ëŸ¬ë‹ ëª¨ë¸ ê´€ë¦¬ ê°€ëŠ¥

ì¶œì²˜ : [https://lsjsj92.tistory.com/621](https://lsjsj92.tistory.com/621)
